build:
  nodes:
    analysis:
      tests:
        override:
          - php-scrutinizer-run
    dependencies:
        before:
            - mysql -u root -e "CREATE DATABASE pureosc"
            - mysql -u root -e "GRANT ALL PRIVILEGES ON pureosc.* TO pureosc@localhost IDENTIFIED BY 'pureosc'"
            - composer self-update
            - composer install --no-interaction
            - ./vendor/bin/phinx seed:run -s Oscommerce -c ./phinx-adapter.php
            - ./vendor/bin/phinx migrate -c ./phinx-adapter.php
    coverage:
      tests:
        override:
          - command: './vendor/bin/phpunit --coverage-clover=coverage.xml'
            coverage:
              file: coverage.xml
              format: clover

filter:
    excluded_paths:
        - 'tests/*'
        - 'vendor/*'
tools:
    php_code_sniffer:
        config:
            standard: "PSR2"

checks:
    php:
        code_rating: true
        duplication: true
node:
    my-node:
        services:
            mariadb: latest          
            