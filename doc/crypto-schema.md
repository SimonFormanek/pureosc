# crypto schema

## granular grants table columns
* grant INSERT, **NOT** UPDATE

## GRANT setup:
* Pristup do dtabulky TABLE_CUSTOMERS_REAL pri prihlaseni? ANONYM vidi customers_password, email:   cm_login_form.php    $customer_query = tep_db_query("select customers_id, customers_password from " . TABLE_CUSTOMERS_REAL . " where customers_email_address = '" . tep_db_input($email_address) . "' limit 1");

# row level security

user row owned restrictions applied to tables: address_book, customer, customer_keys and orders tables are virtialized as view, where cuer can see only rows owned by 
him.

## pregenerated admin keys

Admin keys are generated by adavance by SQL server script: public keys are inserted into db, private keys are 
distributed via air gap to admins.


## admin crypted version levels:

* 0 = backup
* 1 = root
* 2 = tmp


## customers, address_book
source data for creating orders

	customers_firstname_crypted_customer
	customers_firstname_crypted_admin_0
	customers_firstname_crypted_admin_1
	customers_firstname_crypted_admin_2


## orders

	delivery_name_crypted_customer
	delivery_name_crypted_admin_0
	delivery_name_crypted_admin_1
	delivery_name_crypted_admin_2

